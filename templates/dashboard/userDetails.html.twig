{% extends 'dashboard/index.html.twig' %}

{% block stylesheetsMain %}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.20/datatables.min.css"/>
{% endblock %}

{% block main %}

    <div class="container bootstrap snippet">
        <div class="row">
            <div class="col-sm-10"><h1>{{ user.email }}</h1></div>
{#            <div class="col-sm-2"><a href="/users" class="pull-right"><img title="profile image" class="img-circle img-responsive" src="http://www.gravatar.com/avatar/28fd20ccec6865e2d5f0e1f4446eb7bf?s=100"></a></div>#}
        </div>
        <br>
        <div class="row">
            <div class="col-sm-3"><!--left col-->

                <ul class="list-group">
                    <li class="list-group-item list-group-item-secondary">Profil </li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Id: </strong></span> {{ user.id }}</li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Nom Prénom: </strong></span> {{ user.nom }} {{ user.prenom }}</li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Créé le: </strong></span> {{ user.dateCreation | date('d/m/y à h:i:s') }}</li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Rôles: </strong>{{ user.roles|join('|') }}</li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Age: </strong>{{ user.age }} ans</span></li>

                </ul>
                <br>

{#                <div class="panel panel-default">#}
{#                    <div class="panel-heading">Website <i class="fa fa-link fa-1x"></i></div>#}
{#                    <div class="panel-body"><a href="http://bootnipets.com">bootnipets.com</a></div>#}
{#                </div>#}


                <ul class="list-group">
                    <li class="list-group-item list-group-item-secondary">Activité <i class="fa fa-dashboard fa-1x"></i></li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Voyages </strong></span><span class="badge badge-primary">{{ user.voyages|length }}</span></li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Voyages suivis </strong></span><span class="badge badge-danger">{{ user.voyagesSuivis|length }}</span></li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Amis </strong></span><span class="badge badge-success">{{ user.users|length }}</span></li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Followers </strong></span><span class="badge badge-info">{{ user.amis|length }}</span></li>
                    <li class="list-group-item text-right"><span class="pull-left"><strong>Commentaires </strong></span><span class="badge badge-warning">{{ user.commentaires|length }}</span></li>
{#                    <li class="list-group-item text-right"><span class="pull-left"><strong>Followers</strong></span> 78</li>#}
                </ul>

{#                <div class="panel panel-default">#}
{#                    <div class="panel-heading">Social Media</div>#}
{#                    <div class="panel-body">#}
{#                        <i class="fa fa-facebook fa-2x"></i> <i class="fa fa-github fa-2x"></i> <i class="fa fa-twitter fa-2x"></i> <i class="fa fa-pinterest fa-2x"></i> <i class="fa fa-google-plus fa-2x"></i>#}
{#                    </div>#}
{#                </div>#}

            </div><!--/col-3-->
            <div class="col-sm-9">

                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <a class="nav-item nav-link active" id="nav-amis-tab" data-toggle="tab" href="#nav-amis" role="tab" aria-controls="nav-amis" aria-selected="false">Amis</a>
                        <a class="nav-item nav-link" id="nav-voyages-tab" data-toggle="tab" href="#nav-voyages" role="tab" aria-controls="nav-voyages" aria-selected="true">Voyages</a>
                        <a class="nav-item nav-link" id="nav-commentaires-tab" data-toggle="tab" href="#nav-commentaires" role="tab" aria-controls="nav-commentaires" aria-selected="false">Commentaires</a>
                    </div>
                </nav>

                <div class="tab-content" id="nav-tabContent">

                    {# ----- AMIS ----- #}
                    <div class="tab-pane fade show active" id="nav-amis" role="tabpanel" aria-labelledby="nav-amis-tab">

                        <br>
                        <div>
                            <table id="amis" class="display" style="width:100%">
                                <thead>
                                <tr>
                                    <th scope="col">id</th>
                                    <th scope="col">nom prenom</th>

                                    <th scope="col">email</th>
                                    <th scope="col">actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for ami in user.users %}
                                    <tr>
                                        <th scope="row">{{ ami.id }}</th>
                                        <td>{{ ami.prenom}} {{ ami.nom }}</td>
                                        <td>{{ ami.email }}</td>
                                        <td><a href="{{ path('user_details',{id:ami.id}) }}"><span class="badge badge-warning">consulter</span></a></td>
                                    </tr>
                                {% endfor %}

                                </tbody>
                            </table>
                        </div>

                    </div>
                    {# ----- FIN AMIS ----- #}

                    {# ----- VOYAGES ----- #}
                    <div class="tab-pane fade" id="nav-voyages" role="tabpanel" aria-labelledby="nav-voyages-tab">
                        <br>
                        <div>
                            <table id="voyages" class="display" style="width:100%">
                                <thead>
                                <tr>
                                    <th scope="col">id</th>
                                    <th scope="col">nom</th>

                                    <th scope="col">début</th>
                                    <th scope="col">fin</th>
                                    <th scope="col">publication</th>
                                    <th scope="col">status</th>
                                    <th scope="col">public</th>
                                    <th scope="col">actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for voyage in user.voyages %}
                                    <tr>
                                        <th scope="row">{{ voyage.id }}</th>
                                        <td>{{ voyage.name }}</td>
                                        <td>{{ voyage.dateDebut | date('d/m/y h:i:s') }}</td>
                                        <td>{{ voyage.dateFin | date('d/m/y h:i:s') }}</td>
                                        <td>{{ voyage.datePublication | date('d/m/y h:i:s') }}</td>

                                        {% if voyage.isDeleted %}
                                            <td><span class="badge badge-danger">supprimé</span></td>
                                        {% else %}
                                            <td><span class="badge badge-success">actif</span></td>
                                        {% endif %}

                                        {% if voyage.isPublic %}
                                            <td><span class="badge badge-primary">public</span></td>
                                        {% else %}
                                            <td><span class="badge badge-warning">no public</span></td>
                                        {% endif %}
                                        <td><a href="{{ path('voyage_details',{id:voyage.id}) }}"><span class="badge badge-warning">consulter</span></a></td>
                                    </tr>
                                {% endfor %}

                                </tbody>
                            </table>
                        </div>
                    </div>
                    {# ----- FIN VOYAGES ----- #}


                    {# ----- COMMENTAIRES ----- #}
                    <div class="tab-pane fade" id="nav-commentaires" role="tabpanel" aria-labelledby="nav-commentaires-tab">

                        <br>
                        <div>
                            <table id="commentaires" class="display" style="width:100%">
                                <thead>
                                <tr>
                                    <th scope="col">id</th>
                                    <th scope="col">Voyage</th>
                                    <th scope="col">publication</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for commentaire in user.commentaires %}
                                    <tr>
                                        <th scope="row">{{ commentaire.id }}</th>
                                        <td>{{ commentaire.voyageId.name }}</td>
                                        <td>{{ commentaire.datePublication | date('d/m/y h:i:s') }}</td>
                                    </tr>
                                {% endfor %}

                                </tbody>
                            </table>
                        </div>
                    </div>
                    {# ----- FIN COMMENTAIRES ----- #}

                </div>

            </div><!--/tab-content-->

        </div><!--/col-9-->
    </div><!--/row-->


{% endblock %}

{% block javascriptsMain %}
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.20/datatables.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#voyages').DataTable();
        } );
        $(document).ready(function() {
            $('#commentaires').DataTable();
        } );
        $(document).ready(function() {
            $('#amis').DataTable();
        } );
    </script>
{% endblock %}

